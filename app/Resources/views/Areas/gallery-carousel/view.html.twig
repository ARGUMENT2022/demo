<section class="area-gallery-carousel">
    {% set id = 'gallery-carousel-' ~ uniqid() %}
    <div id="{{ id }}" class="gallery carousel slide">
        <!-- Indicators -->
        {% if not editmode %}
            {% set slides = pimcore_block('galleryblock').getCount() %}
            <ol class="carousel-indicators">
                {% for i in 0..(slides-1) %}
                    <li data-target="#{{ id }}" data-slide-to="{{ i }}" class="{{ loop.first ? 'active' }}">
                    </li>
                {% endfor %}
            </ol>
        {% endif %}
        <div class="carousel-inner">
            {% for i in pimcore_iterate_block(pimcore_block('galleryblock')) %}
                <div class="carousel-item {{ id ~ '-' ~ i }} {{ loop.first ? 'active' }}">
                    {{ pimcore_image('image_' ~ i, {
                        thumbnail: 'galleryCarousel',
                    }) }}

                    <div class="container">
                        <div class="carousel-caption text-{{  pimcore_select('position-' ~ i).getData() ? pimcore_select('position-' ~ i).getData() : 'left' }}">

                            {% if not pimcore_input('caption-title-' ~ i).isEmpty() %}
                                <h3>{{ pimcore_input('caption-title-' ~ i).getData() }}</h3>
                            {% endif %}

                            {% if not pimcore_textarea('caption-text-' ~ i).isEmpty() %}
                                <p>{{ pimcore_textarea('caption-text-' ~ i).getData() }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#{{ id }}" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#{{ id }}" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</section>

